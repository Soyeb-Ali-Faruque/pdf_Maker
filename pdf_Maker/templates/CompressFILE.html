{% extends "base.html" %}
{% block content %}
<div class="container">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h3>{{file_type}}</h3>
        {% if isError %}
        <p style="color: red;">{{ error_message }}</p>
        {% endif %}
        <div class="form-group">
            <label for="file">Choose a file:</label>
            <input type="file" class="form-control" id="file" name="file" accept="{{file_type}}" required>           
        </div>
        <div class="form-group">
            <label for="currentFileSize">Current File Size:</label>
            <input type="text" class="form-control" id="currentFileSize" name="currentFileSize" readonly>
            <!-- Display current file size, set as readonly -->
        </div>
        <div class="form-group">
            <label for="targetSizeKB">Target Size (KB):</label>
            <input type="number" class="form-control" id="targetSizeKB" name="targetSizeKB" required>
        </div>

        <input type="submit" class="btn btn-primary" value="Compress">
    </form>
</div>

<script>
    // Fetch current file size and update the input field
    document.getElementById('file').addEventListener('change', function () {
        var fileInput = document.getElementById('file');
        var fileSizeInput = document.getElementById('currentFileSize');
        if (fileInput.files.length > 0) {
            var fileSize = fileInput.files[0].size / 1024; // Convert bytes to kilobytes
            fileSizeInput.value = fileSize.toFixed(2) + ' KB';
        } else {
            fileSizeInput.value = '';
        }
    });
</script>
{% endblock %}
