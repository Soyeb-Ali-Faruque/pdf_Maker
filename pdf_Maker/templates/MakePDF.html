{% extends 'base.html' %}
{% load custom_filters %} 
{% block content %}
 
<div class="container">
    <div class="card">
        <h3>Upload Files</h3>
        <div class="drop_box">
            <h2>
                <h4>Select File here</h4>
            </h2>
            <p>Files Supported:{{type}}</p>
            <input type="file" hidden accept="{{suported}}" id="fileID" name="photos" style="display:none;" multiple required>
            <button class="btn">Choose File</button>
        </div>
    </div>
    {% if generatedPDF %}
    <div class="download-pdf">
        <h3>Your PDF is ready for download</h3>
        <a href="data:application/pdf;base64,{{ generatedPDF|base64_encode }}" download="your.pdf" class="btn">Download PDF</a>
    </div>
    {% endif %}  <!-- End of added code -->

</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const dropArea = document.querySelector(".drop_box");
        const button = dropArea.querySelector("button");
        const dragText = dropArea.querySelector("header");
        const input = dropArea.querySelector("input");
        
        button.onclick = () => {
            input.click();
        };
        
        input.addEventListener("change", function (e) {
            const fileName = e.target.files[0].name;
            const filedata = `
                <div class="form">
                    <h4>${fileName}</h4>
                    <input type="email" placeholder="Enter email to upload file">
                    <button class="btn">Upload</button>
                </div>`;
            dropArea.innerHTML = filedata;
        });
    });
</script>
 {% endblock %}